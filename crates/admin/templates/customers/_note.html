{#
    Customer Note Section Partial (HTMX target)

    Variables:
    - customer_id: Customer short ID
    - note: Current note text (optional)
    - success: Whether the update was successful (optional)
#}

{% if let Some(true) = success %}
<div class="mb-3 p-2 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400 text-sm rounded">
    Note saved successfully
</div>
{% endif %}

<form hx-post="/customers/{{ customer_id }}/note"
      hx-target="#note-container"
      hx-swap="innerHTML">
    <textarea name="note" rows="4"
              class="w-full p-3 bg-input rounded-lg text-sm border-0 focus:ring-2 focus:ring-ring resize-none"
              placeholder="Add internal note...">{{ note.as_deref().unwrap_or("") }}</textarea>
    <button type="submit"
            class="mt-2 px-4 py-2 bg-muted text-foreground rounded-lg text-sm hover:bg-accent transition-colors">
        Save Note
    </button>
</form>
