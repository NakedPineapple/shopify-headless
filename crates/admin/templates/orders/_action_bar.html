{#
    Order Action Bar Partial

    Variables:
    - order: OrderDetailView with short_id, name, is_paid, is_cancelled, is_archived, has_capturable
#}

<div class="flex items-center justify-between mb-6">
    <a href="/orders" class="inline-flex items-center gap-2 text-sm text-muted-foreground hover:text-primary transition-colors">
        <i class="ph ph-arrow-left"></i>
        Back to Orders
    </a>

    <div class="flex items-center gap-3">
        <!-- Actions Dropdown -->
        <div class="relative" x-data="{ open: false }">
            <button @click="open = !open"
                    class="inline-flex items-center gap-2 px-4 py-2 bg-card border border-border rounded-lg text-sm font-medium hover:bg-muted transition-colors">
                <i class="ph ph-dots-three-outline"></i>
                More actions
                <i class="ph ph-caret-down text-xs"></i>
            </button>

            <div x-show="open"
                 @click.away="open = false"
                 x-transition
                 class="absolute right-0 mt-2 w-48 bg-card border border-border rounded-lg shadow-lg z-50">
                <div class="py-1">
                    {% if !order.is_archived %}
                    <form action="/orders/{{ order.short_id }}/archive" method="POST">
                        <button type="submit" class="w-full px-4 py-2 text-left text-sm hover:bg-muted flex items-center gap-2">
                            <i class="ph ph-archive"></i>
                            Archive order
                        </button>
                    </form>
                    {% else %}
                    <form action="/orders/{{ order.short_id }}/archive?unarchive=true" method="POST">
                        <button type="submit" class="w-full px-4 py-2 text-left text-sm hover:bg-muted flex items-center gap-2">
                            <i class="ph ph-archive"></i>
                            Unarchive order
                        </button>
                    </form>
                    {% endif %}

                    <a href="/orders/{{ order.short_id }}/print?type=invoice"
                       target="_blank"
                       class="block px-4 py-2 text-sm hover:bg-muted flex items-center gap-2">
                        <i class="ph ph-printer"></i>
                        Print invoice
                    </a>

                    <a href="/orders/{{ order.short_id }}/print?type=packing_slip"
                       target="_blank"
                       class="block px-4 py-2 text-sm hover:bg-muted flex items-center gap-2">
                        <i class="ph ph-package"></i>
                        Print packing slip
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
