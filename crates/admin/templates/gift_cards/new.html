{% extends "layouts/base.html" %}

{% block title %}Create Gift Card{% endblock %}

{% block page_title %}Create Gift Card{% endblock %}

{% block page_subtitle %}
<p class="text-sm text-gray-500 mt-1">Issue a new gift card</p>
{% endblock %}

{% block content %}
<div class="max-w-2xl">
    <!-- Error Alert -->
    {% if let Some(err) = error %}
    <div class="mb-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4">
        <div class="flex items-center gap-3">
            <i class="ph ph-warning-circle text-xl text-red-600 dark:text-red-400"></i>
            <p class="text-sm text-red-800 dark:text-red-200">{{ err }}</p>
        </div>
    </div>
    {% endif %}

    <!-- Success Alert with Code -->
    {% if let Some(code) = success_code %}
    <div class="mb-6 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-4">
        <div class="flex items-center gap-3">
            <i class="ph ph-check-circle text-xl text-green-600 dark:text-green-400"></i>
            <div>
                <p class="text-sm font-medium text-green-800 dark:text-green-200">Gift card created successfully!</p>
                <p class="text-sm text-green-700 dark:text-green-300 mt-1">
                    Code: <span class="font-mono font-bold">{{ code }}</span>
                </p>
                <p class="text-xs text-green-600 dark:text-green-400 mt-1">
                    Save this code - it will not be shown again.
                </p>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Info Banner -->
    <div class="mb-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4">
        <div class="flex items-center gap-3">
            <i class="ph ph-info text-xl text-blue-600 dark:text-blue-400"></i>
            <p class="text-sm text-blue-800 dark:text-blue-200">
                Gift card creation is coming soon. For now, use the Shopify admin to create gift cards.
            </p>
        </div>
    </div>

    <!-- Form Card -->
    <div class="bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-800 overflow-hidden">
        <form action="/gift-cards" method="POST" class="p-6 space-y-6">
            <!-- Initial Value -->
            <div>
                <label for="initial_value" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                    Initial Value <span class="text-red-500">*</span>
                </label>
                <div class="relative">
                    <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-500">$</span>
                    <input type="number"
                           step="0.01"
                           min="1"
                           id="initial_value"
                           name="initial_value"
                           required
                           placeholder="0.00"
                           class="w-full pl-8 pr-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm focus:ring-2 focus:ring-coral focus:border-coral transition-colors">
                </div>
                <p class="mt-1.5 text-xs text-gray-500 dark:text-gray-400">
                    The starting balance for this gift card
                </p>
            </div>

            <!-- Customer (optional) -->
            <div>
                <label for="customer_id" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                    Customer (optional)
                </label>
                <input type="text"
                       id="customer_id"
                       name="customer_id"
                       placeholder="Customer ID (e.g., gid://shopify/Customer/123)"
                       class="w-full px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm focus:ring-2 focus:ring-coral focus:border-coral transition-colors">
                <p class="mt-1.5 text-xs text-gray-500 dark:text-gray-400">
                    Associate this gift card with a specific customer
                </p>
            </div>

            <!-- Expiration Date (optional) -->
            <div>
                <label for="expires_on" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                    Expiration Date (optional)
                </label>
                <input type="date"
                       id="expires_on"
                       name="expires_on"
                       class="w-full px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm focus:ring-2 focus:ring-coral focus:border-coral transition-colors">
                <p class="mt-1.5 text-xs text-gray-500 dark:text-gray-400">
                    Leave empty for a gift card that never expires
                </p>
            </div>

            <!-- Note (optional) -->
            <div>
                <label for="note" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                    Note (optional)
                </label>
                <textarea id="note"
                          name="note"
                          rows="3"
                          placeholder="Internal note about this gift card..."
                          class="w-full px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm focus:ring-2 focus:ring-coral focus:border-coral transition-colors resize-none"></textarea>
                <p class="mt-1.5 text-xs text-gray-500 dark:text-gray-400">
                    For internal use only - not visible to customers
                </p>
            </div>

            <!-- Actions -->
            <div class="flex items-center gap-4 pt-4 border-t border-gray-200 dark:border-gray-700">
                <button type="submit"
                        disabled
                        class="px-6 py-2.5 bg-coral text-white rounded-lg hover:bg-coral/90 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed">
                    Create Gift Card
                </button>
                <a href="/gift-cards"
                   class="px-6 py-2.5 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors">
                    Cancel
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
