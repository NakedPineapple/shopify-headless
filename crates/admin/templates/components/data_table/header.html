{#
    Data Table Header

    Variables:
    - table_id: Unique identifier for the table
    - columns: List of column definitions with:
      - key: Column identifier
      - label: Display label
      - sortable: Whether column is sortable
      - visible: Whether column is visible
    - sort_column: Current sort column
    - sort_direction: Current sort direction (asc/desc)
    - has_checkbox: Whether to show select all checkbox
#}

<thead class="bg-muted">
    <tr>
        {% if has_checkbox %}
        <th class="w-12 px-6 py-3">
            <input type="checkbox"
                   id="{{ table_id }}-select-all"
                   class="rounded border-border text-primary focus:ring-primary">
        </th>
        {% endif %}

        {% for col in columns %}
        <th data-column="{{ col.key }}"
            class="px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider {% if !col.visible %}hidden{% endif %}">
            {% if col.sortable %}
            <a href="?sort={{ col.key }}&dir={% if sort_column == col.key && sort_direction == "asc" %}desc{% else %}asc{% endif %}{{ preserve_params }}"
               class="inline-flex items-center gap-1 hover:text-foreground transition-colors group">
                {{ col.label }}
                {% if sort_column == col.key %}
                <i class="ph ph-caret-{% if sort_direction == "asc" %}up{% else %}down{% endif %} text-primary"></i>
                {% else %}
                <i class="ph ph-caret-up-down text-muted-foreground/50 group-hover:text-muted-foreground"></i>
                {% endif %}
            </a>
            {% else %}
            {{ col.label }}
            {% endif %}
        </th>
        {% endfor %}
    </tr>
</thead>
